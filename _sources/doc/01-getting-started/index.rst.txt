.. raw:: html

   <script src="../../_static/clipboard.min.js" ></script> <script
   src="../../_static/class.js" ></script> <script
   src="../../_static/date.js" ></script> <br/> <font
   color="darkgray"> <big><big><b> Sireum Awas Documentation
   </b></big></big> </font> <br/> <font color="black">
   <big><big><big><big><b>
   1. Getting Started </b></big></big></big></big> </font>

.. highlight:: none

.. include:: ../../def.rst

.. _getting-started:

Getting Started
###############
x64 macOS, Linux, and Windows
operating systems in Google Chrome and Mozilla Firefox browsers.  

There three ways one can obtain Awas:

1. `Using osate plugin`_
2. `Using Awas pre-build Jar`_ 
3. `Using Awas source`_

.. _Using osate plugin:

Sireum Awas pluging for OSATE
******************************

.. _OSATE: http://osate.org/

OSATE_ is a customized Eclipse IDE for developing AADL models. Awas
can be installed as a plugin in OSATE.

1. Open OSATE, and navigate to Help > Install New Software ...

2. Click Add... and in the Location: field paste the following URL

.. raw:: html

   <table width="100%" > <tr> <td>

.. code:: bash

   https://raw.githubusercontent.com/sireum/osate-plugin-update-site/master/

.. raw:: html

      </td> <td style="vertical-align: text-top;"> &nbsp;&nbsp;
      <button id="copyMacDevelopment"
      data-clipboard-text="https://raw.githubusercontent.com/sireum/osate-plugin-update-site/master/">
      <img height="20" src="../../_static/clippy.svg" alt="Copy to
      clipboard"/> </button> </td> </tr> </table> <script> new
      Clipboard(document.getElementById('copyMacDevelopment'));
      </script>


3. Expand the ``Sireum`` option and select ``Sireum Awas plugin`` to
   install then click ``Next``

.. image:: plugin-install-1.png

4. Accept the license aggrement and click ``Finish``

Once installed restart the Osate to use Awas.

.. _Using Awas pre-build Jar:

Sireum Awas JAR
****************

Sireum Awas can be included in your OSATE plugin using the published
JAR.  To include it in your project using the following ``Maven``
resolver and dependency.

1. Add the JitPack repository to your build file

.. code:: xml

	<repositories>
	  <repository> <id>jitpack.io</id>
	    <url>https://jitpack.io</url>
	  </repository>
	</repositories>

2. Add the dependency
   
.. code:: xml
	  
	<dependency> <groupId>com.github.sireum</groupId>
	    <artifactId>v3-awas</artifactId>
	    <version>-SNAPSHOT</version>
	</dependency>

.. _Using Awas source:

Sireum Awas source distribution
*******************************

Prerequisites
=============

.. _Sireum: https://github.com/sireum/v3
.. _OSATE development environment:
   http://osate.org/setup-development.html

1. Install the required tools for building Sireum: bash, git, unzip,
   wget, bc

2. Follow the instructions in the Sireum_ webpage apropriate for your
   platform to install the ``Sireum IVE for development``

3. Clone the following repositories
   
   - Using HTTPS:
     
   .. code:: bash
	     
	     git clone --recursive https://github.com/sireum/v3.git
	     sireum-v3 git clone https://github.com:sireum/air.git
	     sireum-v3/aadl/ir
   - Using SSH:
     
   .. code:: bash
	     
	     git clone --recursive git@github.com:sireum/v3.git
	     sireum-v3 git clone git@github.com:sireum/air.git
	     sireum-v3/aadl/ir
	     
4. Follow the `OSATE developement environment`_ webpage for Sireum
   Awas plugin development Eclipse is the underlying IDE being used in
   OSATE development so the rest of these instructions will refer to
   the IDE as ``Eclipse``.


	     

Installing and Running Awas
===========================

There two steps in building Sireum Awas from source

1. `Building Sireum Awas Jar`_
2. `Building Sireum Awas plugin`_
   
.. _Setting up Sireum IVE:
   https://github.com/sireum/v3#setting-up-sireum-ive-for-sireum-v3-development

.. _Building Sireum Awas Jar:

Building Sireum Awas Jar
------------------------

1. From the parent directory of ``sireum-v3`` cloned in the previous
   step clone awas repository
   - Using HTTPS:
     
   .. code:: bash
	     
	     git clone https://github.com/sireum/v3-awas.git
	     sireum-v3/awas
   - Using SSH:
     
   .. code:: bash
	     
	     git clone git@github.com:sireum/v3-awas.git
	     sireum-v3/awas

2. Following `Setting up Sireum IVE`_ to setup the devlopment
   environment
   
   .. note:: Enable the ``Use sbt shell for build and import`` option

3. Building the Sireum Awas JAR
   
   - Without Scala:
     
     Execute the following command in the Sbt shell

     .. code:: bash

	     ;project awasJar;assembly
	     
     Awas Jar can be found under ``awasJar/target/scala-2.12/``

   - With Scala:
     
     Execute the following command in the Terminal

   .. code:: bash

	     ./awas/buildSireumJar.sh

.. _Building Sireum Awas Plugin:

Building Sireum Awas plugin
---------------------------

.. _link: http://scala-ide.org/

1. Open the Eclipse and install Scala IDE for Eclipse by following the
   instruction on this link_

2. Clone the following repository

   .. code:: bash

	  git clone git@github.com:sireum/osate-plugin.git
	  osate-plugin

3. In Eclipse go to File -> Import...

4. Expand the ``General`` folder and ``select Existing Project into
   Workspace``, then click ``Next``

5. Enter the path to the directory where you cloned the repository and
   then select all the available projects from the project listings
   and click ``Finish``

6. Switch to the plug-in development perspective: ``Window ->
   Perspective -> Open Perspective -> Other... -> Plug-in
   Development``

7. Copy the jar built in the `Building Sireum Awas Jar`_ step into the
   ``<ostate-plugin-dir>/org.sireum.aadl.osate.awas/lib/`` directory

Running Awas
------------

.. _these: https://wiki.sei.cmu.edu/aadl/index.php/Editing_a_first_AADL_model

1. Open an AADL model in OSATE and build an instance model (follow
   these_ instructions to create an instance model)
   
2. Select a system implementation from the ``Outline`` and select
   ``OSATE > Sireum Bridge > Generate Awas Visulaizer`` from the menu
   bar

3. In the popup, select a directory to save the generated Awas visualizer. 

   
